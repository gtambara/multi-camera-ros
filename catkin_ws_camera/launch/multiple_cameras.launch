
<!-- Launch file for starting multiple kinect cameras -->
<!-- Example of usage: 'roslaunch multiple_cameras.launch num_cameras:=2' -->
<!-- Obs: Each camera needs to be in a differente USB Bus  -->

<launch> 

   <!-- start node -->

   <arg name="num_cameras" default="1"/>
   <arg name="device_id" default="$(eval '#' + str(arg('num_cameras')))"/>

   <group ns="$(eval 'cam_' + str(arg('num_cameras')))">
      
      <include file="$(find freenect_launch)/launch/freenect.launch">
         <arg name="device_id" value="$(arg device_id)"/>
      </include>
      
      <include file="/home/ur3/catkin_ws_camera/launch/marker_publisher.launch">
         <arg name="cam_id" value="$(eval 'cam_' + str(arg('num_cameras')))"/>
      </include>

   </group>

   <!-- recursively start new node -->
   <include file="/home/ur3/catkin_ws_camera/launch/multiple_cameras.launch" if="$(eval arg('num_cameras') - 1 > 0)">
       <arg name="num_cameras" value="$(eval arg('num_cameras') - 1)"/>
       <arg name="device_id" value="$(eval '#' + str(arg('num_cameras') - 1))"/>
   </include>

</launch>